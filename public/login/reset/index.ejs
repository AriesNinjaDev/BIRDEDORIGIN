<!doctype html>
<html lang="en">
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<head>
  <link href="/notifstyle.css" rel="stylesheet">
    <meta charset="utf-8"/>
    <script src="/jquery.min.js"></script>
    <script src="/foundation.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <title>Birded | Reset</title>
    <meta name="msapplication-TileColor" content=""/>
    <meta name="theme-color" content=""/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="mobile-web-app-capable" content="yes"/>
    <meta name="HandheldFriendly" content="True"/>
    <meta name="MobileOptimized" content="320"/>
    <link rel="icon" href="/favi.ico" type="image/x-icon"/>
    <meta name="description" content="Preregister today at birded.tech!"/>
    <meta name="twitter:image:src" content="https://birded.tech/game/static/sponsor.png">
    <meta name="twitter:site" content="@birdedofficial">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Birded | An immersive text-based adventure.">
    <meta name="twitter:description" content="Preregister today at birded.tech!">
    <meta property="og:image" content="https://birded.tech/game/static/sponsor.png">
    <meta property="og:image:width" content="1280">
    <meta property="og:image:height" content="640">
    <meta property="og:site_name" content="Birded - The Game">
    <meta property="og:type" content="object">
    <meta property="og:title" content="Birded | An immersive text-based adventure.">
    <meta property="og:url" content="https://birded.tech/game/static/sponsor.png">
    <meta property="og:description" content="Preregister today at birded.tech!">
    <!-- CSS files -->
    <link href="/login/dist/css/tabler.min66d9.css?1674944800" rel="stylesheet"/>
    <link href="/login/game/dist/css/tabler-flags.min66d9.css?1674944800" rel="stylesheet"/>
    <link href="/login/game/dist/css/tabler-payments.min66d9.css?1674944800" rel="stylesheet"/>
    <link href="/login/game/dist/css/tabler-vendors.min66d9.css?1674944800" rel="stylesheet"/>
    <link href="/login/game/dist/css/demo.min66d9.css?1674944800" rel="stylesheet"/>
 
  </head>
  <style>
.circle, #bird .eye, .quarter, #bird .lowerLip, #bird .upperLip, #bird .cheek, .half, #bird .face, #bird .crest {
  border-radius: 50%;
  background-repeat: no-repeat;
  overflow: hidden;
}

.half, #bird .face, #bird .crest {
  background-size: 50% 100%;
}

.quarter, #bird .lowerLip, #bird .upperLip, #bird .cheek {
  background-size: 50% 50%;
}

    #bird {
  width: 20em;
  height: 20em;
  overflow: hidden;
  position: relative;
  transition: opacity 1s;
}
#bird > div {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  margin: auto;
}
#bird .crest {
  width: 100%;
  height: 100%;
  background-image: linear-gradient(to right, #a12a15, #a12a15);
  animation: crest 2300ms infinite linear;
}
@keyframes crest {
  0% {
    transform: rotate(0deg);
  }
  25%, 50% {
    transform: rotate(180deg);
  }
  75%, 100% {
    transform: rotate(360deg);
  }
}
#bird .face {
  width: 65%;
  height: 65%;
  background-image: linear-gradient(to right, #FFF2FF, #FFF2FF);
  animation: face 2300ms infinite linear;
}
@keyframes face {
  0% {
    transform: rotate(0deg);
  }
  25%, 50% {
    transform: rotate(-180deg);
  }
  75%, 100% {
    transform: rotate(-360deg);
  }
}
#bird .cheek {
  width: 65%;
  height: 65%;
  background-image: linear-gradient(to right, #E7E7E7, #E7E7E7);
  animation: cheek 2300ms infinite linear;
}
@keyframes cheek {
  0% {
    transform: rotate(-90deg);
  }
  25%, 50% {
    transform: rotate(-180deg);
  }
  75%, 100% {
    transform: rotate(-450deg);
  }
}
#bird .upperLip {
  width: 65%;
  height: 65%;
  background-image: linear-gradient(to right, #F7CE42, #F7CE42);
  animation: upperLip 2300ms infinite linear;
}
@keyframes upperLip {
  0% {
    transform: rotate(90deg);
  }
  25%, 50% {
    transform: rotate(0deg);
  }
  75%, 100% {
    transform: rotate(90deg);
  }
}
#bird .lowerLip {
  width: 35%;
  height: 35%;
  background-image: linear-gradient(to right, #F7A500, #F7A500);
  animation: lowerLip 2300ms infinite linear;
}
@keyframes lowerLip {
  0% {
    transform: rotate(180deg);
  }
  25%, 50% {
    transform: rotate(270deg);
  }
  75%, 100% {
    transform: rotate(180deg);
  }
}
#bird .eye {
  width: 15%;
  height: 15%;
  background-color: #18233e;
  transform: translate(-60%, -60%);
  animation: eye 2300ms infinite linear;
}
@keyframes eye {
  0% {
    transform: translate(-60%, -60%);
  }
  25%, 50% {
    transform: translate(60%, -60%);
  }
  75%, 100% {
    transform: translate(-60%, -60%);
  }
}
    
    .overlayi {
  background-color: rgba(100, 100, 100, 0);  
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  filter: blur(0px);
}

  

.center {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

  body {display:flex;width:100%;}

  .blurlocal {
    filter: blur(20px);
  }

  .unblurtype {
    animation: unblur 0.4s ease-in-out forwards;
  }

@keyframes unblur {
  from {
    filter: blur(20px);
  }
  to {
    filter: blur(0);
  }
}

.disabledbtn {
  pointer-events: none !important;
  cursor: default !important;
  opacity: 0.6 !important;
}

  </style>
  <div id="overlayi" class="overlayi">
    
    
    
    <div class="center">
      
      <h2 id="loadingtext" style="color:white;-webkit-filter: invert(100%);filter: invert(100%);margin-bottom:20px;">Loading...</h2>
      
      <div id="bird">

  <div class="lowerLip"></div>

  <div class="crest"></div>

  <div class="face"></div>
 
  <div class="cheek"></div>

  <div class="eye"></div>

  <div class="upperLip"></div></div></div></div>
  <body  class=" d-flex flex-column">
    <script src="dist/js/demo-theme.min66d9.js?1674944800"></script>
    <div id="unblurobj" class="page blurlocal" style="width:100%;">
    <div class="page page-center">
      <div class="container container-tight py-4">
        <div class="text-center mb-4">
          <a href="error-404.html" class="navbar-brand navbar-brand-autodark"><img src="/game/static/logo.png" height="36" alt=""></a>
        </div>
        <form class="card card-md" method="get" autocomplete="off" novalidate>
          <div class="card-body">
            <h2 class="card-title text-center mb-4">Change Password</h2>
            <p class="text-muted mb-4">Enter your current password, and then you'll be allowed to change it. If you don't remember your current password, please contact support at <a href="mailto:official@birded.tech">official@birded.tech</a>.</p>
            <div class="mb-3">
              <label class="form-label">Current Password</label>
              <input id="i_current" type="password" class="form-control" placeholder="Enter your current password.">
            </div><hr>
            <div class="mb-3">
              <label class="form-label">New Password</label>
              <input id="i_new" type="password" class="form-control" placeholder="Type your new password.">
            </div>
            <div class="mb-3">
              <label class="form-label">Confirm Password</label>
              <input id="i_confirm" type="password" class="form-control" placeholder="Retype your new password.">
            </div>
            <div class="form-footer">
              <a id="submitbtn" href="#" class="btn btn-primary w-100 disabledbtn" onclick="event.preventDefault(); changepwdsubmit();">
                <!-- Download SVG icon from http://tabler-icons.io/i/mail -->
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-lock-check" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
   <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
   <path d="M11.5 21h-4.5a2 2 0 0 1 -2 -2v-6a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v.5"></path>
   <path d="M11 16a1 1 0 1 0 2 0a1 1 0 0 0 -2 0"></path>
   <path d="M8 11v-4a4 4 0 1 1 8 0v4"></path>
   <path d="M15 19l2 2l4 -4"></path>
</svg>
                Update my Password
 </a>
            </div>
          </div>
        </form>
        <div class="text-center text-muted mt-3">
          Take me back to the <a href="/game/settings">settings</a> page.
        </div>
      </div>
    </div>
        <!-- Libs JS -->
    <script src="/game/dist/libs/apexcharts/dist/apexcharts.min66d9.js?1674944800" defer></script>
    <script src="/game/dist/libs/jsvectormap/dist/js/jsvectormap.min66d9.js?1674944800" defer></script>
    <script src="/game/dist/libs/jsvectormap/dist/maps/world66d9.js?1674944800" defer></script>
    <script src="/game/dist/libs/jsvectormap/dist/maps/world-merc66d9.js?1674944800" defer></script>
    <!-- Tabler Core -->
    <script src="/game/dist/js/tabler.min66d9.js?1674944800" defer></script>
    <script src="/game/dist/js/demo.min66d9.js?1674944800" defer></script>

    <script src="/notification.js"></script>
<script src="/socket.io.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.0.3/pako.min.js"></script>
      <%- include(origin + '/public/gscripts'); %>
<script>
  var socket = io();
  var loadPlayer
  var tp_avatar

    function changeData(id, key, val) {
  socket.emit("changeData", { id, key, val });
}
  
function custom_alert( message, title ) {
    if ( !title )
        title = 'Alert';

    if ( !message )
        message = 'No Message to Display.';

    $('<div></div>').html( message ).dialog({
        title: title,
        resizable: false,
        modal: true,
        buttons: {
            'Ok': function()  {
                $( this ).dialog( 'close' );
            }
        }
    });
}


  
function setCookie(name, value, days) {
  var expires = "";
  if (days) {
    var date = new Date();
    date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
    expires = "; expires=" + date.toUTCString();
  }
  document.cookie = name + "=" + (value || "") + expires + "; path=/";
}

function getCookie(name) {
  var nameEQ = name + "=";
  var ca = document.cookie.split(';');
  for (var i = 0; i < ca.length; i++) {
    var c = ca[i];
    while (c.charAt(0) == ' ') c = c.substring(1, c.length);
    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
  }
  return null;
}

function eraseCookie(name) {
  document.cookie = name + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';
}
// ------------------------------------------ //
const canvas = document.createElement('canvas');

const sigObject = document.getElementById("sig");
const emailObject = document.getElementById("emailinput");
const x = getCookie('session_id');
const y = getCookie('access_id');
var grant = 1

alertify.set({ delay: 1700 });

const codes = "14708605"

function chk() {
  if (codes.split(",").indexOf(y) !== -1) {
    
      grant = 1;
    
  }
}

  
  chk()

const isPasswordSecure = (password) => {
  const re = new RegExp("^(?=.*[a-z])(?=.*[0-9])(?=.{7,})");
  return re.test(password);
};

function logoutF() {
  eraseCookie('session_id')
  eraseCookie('access_id')
  window.location.href = "/login"
}



socket.emit("verifyId", x);

socket.on('verifyIdResult', (allowed) => {
  if (allowed == 1) {
    socket.emit("grabStatics", x,"1");
  } else {
    eraseCookie(y)
    window.location.href = "/login";
  }
});

socket.on('grabStaticsResult', (allowed,onl) => {
  if (onl == 0) {
    document.getElementById("loadingtext").innerText = allowed
    alertify.error(allowed,5000);
  }
  loadPlayer = allowed;

  if (loadPlayer.account.status == -1) {
    document.getElementById("loadingtext").innerText = "You are banned from Birded."
    alertify.error("You have been permanently banned from Birded.",20000);
    alertify.error("Please contact official@birded.tech if you have questions or concerns regarding your ban.",20500);
    loadPlayer = ""
  }
  
  
  document.getElementById("overlayi").remove();
  var mcobj = document.getElementById("unblurobj")
  mcobj.classList.add("unblurtype");
});

(function() {
  $('input').keyup(function() {

    var empty = false;
    $('input').each(function() {
      if ($(this).val() == '') {
        empty = true;
      }
    });

    if (empty) {
      $('#submitbtn').addClass('disabledbtn');
    } else {
      $('#submitbtn').removeClass('disabledbtn');
    }
  });
})()

socket.on('checkPwdChangeResult', (allowed) => {
  if (allowed == 1) {
    eraseCookie('session_id')
    eraseCookie('access_id')
    window.location.href = "success";
  } else {
    alertify.error("Invalid current password.", 5000);
  }
});

function changepwdsubmit() {
  const cu = document.getElementById("i_current").value;
  const ne = document.getElementById("i_new").value;
  const re = document.getElementById("i_confirm").value;

  if (ne == re) {
              
  if (cu != ne) {

    if (isPasswordSecure(ne)) {
      socket.emit("checkPwdChange", x, cu, ne);
    } else {
      alertify.error("Password must have at least 1 letter and 1 number, and be at least 7 characters long!", 5000);
    }
  } else {
    alertify.error("New password cannot be the same as the current password!", 5000);
 }
    
  } else {
    alertify.error("Passwords do not match.",5000);
  }
  }



  
</script>
    </div>
  </body>
</html>